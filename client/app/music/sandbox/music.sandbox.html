<!-- parent controller: SidebarCtrl as sidebar -->
<!-- controller: MusicSandboxCtrl as sand -->

<toolbar></toolbar>
<music-audio></music-audio>


<div class="col-md-12 col-lg-12">
  <p>Drop chord roots onto measures:</p>
  <div id="score" class="row">
    <div class="measure dropdown" ng-repeat="measure in sand.song">
      
      <!--before drop-->
      <button 
        droppable
        id="song{{+$index}}"
        class="btn btn-default dropdown-toggle song"
        type="button"
        ng-mouseover="sand.mouseOver($index)"
        ng-mouseleave="sand.mouseLeave()"
        ng-mouseUp="sand.mouseUp($index)"
        ng-click="sand.dropdown($index)"><span class="caret"></span>{{measure.currentroot}}{{measure.currentChord}}</button>

      <button type="button" class="btn btn-danger btn-xs" ng-click="sand.deleteCurrentMeasure($index)">X</button>

      <ul class="dropdown-menu measure" role="menu">
        <li ng-repeat="sub in sand.substitutions">
          <a href="#" ng-click="sand.updateChord($index, sub.name, sub.chordroot)">{{sub.chordroot}}{{sub.name}} {{sub.notes}}</a>
        </li>
      </ul>
      <measure-split class="dropdown-menu splits"></measure-split>
      <!--before drop-->
      <!--after drop-->
      <!--after drop-->

    </div>

	</div>
</div>